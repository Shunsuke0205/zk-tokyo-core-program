## 1. QAPのトレースがなぜ加算ゲートの出力を記録しなくてもいいのか、理由を説明してください。（ヒント: Linear PCP）

マスター多項式の中で表現されているため．  
マスター多項式
$
p(x) = (\sum c_i l_i(x) )(\sum c_ir_i(x)) - \sum c_i o(x)
$
に対し，例えば，あるゲート$w^j$の右の入力が加算ゲート$a$の出力で，左の入力ある乗算ゲートの出力$g_l$だったとする．  
このとき，$a$の入力をそれぞれ$a_l, a_r$とし，$w^j$の出力を$o_j$とおくと，  
$$
p(w^j) = g_l (a_l + a_r) - o_j
$$
となる．
このとき，$a$の出力は記録されていないが，シグマによる計算結果として現れる．  
このように，乗算ゲートの入力の内加算回路の出力となっているものは，その加算回路の入力を記録することで，マスター多項式の計算の際に出現するため，記録する必要はない．

---

## 2. 講義で紹介された算術回路とセレクター多項式をもとにマスター多項式p(x)と商多項式q(x)を一つ考えてください。
入力wをそれぞれ$w_i = i (i = 6,1,2,3,4,5)$とすると，$g_1 = 6, g_4 = 2, g_5 = 3$ となる．    
したがって，
$$
\sum c_i l_i (x) = 6* (3x^2 + 6x + 5) + 2 * (5x^2 + 5x + 5) + 3*(5x^2 + 5x + 5) + 6 * (6x^2 + 3x + 5)  
                 =  2x^2 + 2x + 1
$$
$$
\sum c_i r_i (x) = 1*(3x^2 + 6x + 5) + 2 * (6x^2 + 3x + 5) + 3 * (6x^2 + 3x + 5) + 4 * (5x^2 + 5x + 5) + 5 * (5x^2 + 5x + 5)  
                 = x^2 + 3x + 5
$$
$$
\sum c_i o_i(x) = 6 * (3x^2 + 6x + 5) + 2 * (6x^2 + 3x + 5) + 3 * (5x^2 + 5x + 5)   
                 = 3x^2 + x + 6
$$
よって，
#### マスター多項式p(x)

$$
p(x) = (x^2 + 5x + 1)(2x^2 + 5x + 4) - (2x^2 + 3x + 1) = 2x^4 + x^3 + 3x^3 + 4x  +4
$$
このとき，
#### 商多項式q(x)

$$
2x + 1
$$

---

## 3. Linear PCPベースのSNARKとGroth16がどのような安全性仮定に基づいているか説明してください。(ヒント: Generic Group Model, KoE Assumption)

Knowledge of exponecial Assumption  
問題意識：$\pi_i$が本当に$g^{l_i(\tau)}$から導出されていることを保証したい．  
KoE仮定とは，2つの群要素([1],[$\alpha$])に対して([k],[$k\alpha$])を出力できるアルゴリズムは必ずkを知っているという仮定である  
これを仮定すると  
Generic Group Model  
k
[参考]
- https://www.youtube.com/watch?v=I7TXIHXamwM 
- https://www.jstage.jst.go.jp/article/iis/25/1/25_2019.R.03/_pdf
- https://medium.com/blockapex/a-primer-for-the-zero-knowledge-cryptography-iii-4d1ee3bd6b0d

---